(this["webpackJsonp@service/canvas"]=this["webpackJsonp@service/canvas"]||[]).push([[0],{39:function(e,t,n){e.exports=n(56)},56:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),l=n(25),u=n(4),i=n(9),s=n(16),m=n.n(s),f=n(19),E="https://main-api.jonghyeon.com";function p(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){fetch("".concat(E,"/api/image/sketches"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status<200||t.status>=300)){e.next=2;break}throw Error();case 2:return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return c(e)}))}),[]),a.a.createElement("ul",null,n.map((function(e){var t=e.id,n=e.imageUrl;return a.a.createElement("li",{key:t},a.a.createElement("div",null,a.a.createElement("p",null,"id: ",t),a.a.createElement("p",null,a.a.createElement("img",{src:"".concat(E,"/").concat(n),alt:""+t}))))})))}var v;function d(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){fetch("".concat(E,"/api/image/tiles"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status<200||t.status>=300)){e.next=2;break}throw Error();case 2:return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return c(e)}))}),[]),a.a.createElement("ul",null,n.map((function(e){var t=e.id,n=e.imageUrl;return a.a.createElement("li",{key:t},a.a.createElement("div",null,a.a.createElement("p",null,"id: ",t),a.a.createElement("p",null,a.a.createElement(l.b,{to:"/paint/".concat(t)},a.a.createElement("img",{src:"".concat(E,"/").concat(n),alt:""+t})))))})))}!function(e){e.SKETCH="SKETCH",e.TILE="TILE"}(v||(v={}));var b=function(){var e=Object(r.useState)(v.SKETCH),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useCallback)((function(){c((function(e){return e===v.SKETCH?v.TILE:v.SKETCH}))}),[c]);return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("p",null,"mode: ",n),a.a.createElement("p",null,a.a.createElement("button",{type:"button",onClick:o},"toggle mode"))),a.a.createElement("div",null,n===v.SKETCH&&a.a.createElement(p,null),n===v.TILE&&a.a.createElement(d,null)))},h=n(77),j=n(79),C=n(81),O=n(82),g=n(80),w=Object(h.a)({colorCircle:{"box-sizing":"border-box",width:"35px",height:"35px","flex-shrink":0,"max-width":"100%","border-radius":"50%",cursor:"pointer"},color:function(e){return{backgroundColor:e.color}}});function x(e){var t=e.color,n=e.onClick,r=w({color:t});return a.a.createElement("div",{className:"".concat(r.colorCircle," ").concat(r.color),onClick:function(){return n(t)}})}var k=["#4A90E2","#F5A623","#F8E71C","#8B572A","#417505","#BD10E0","#50E3C2","#9013FE","#B8E986"],S=Object(h.a)((function(e){return{root:{flexGrow:1},wrapper:{display:"flex","flex-wrap":"wrap"}}}));function y(e){var t=e.onChange,n=S();return a.a.createElement("div",{className:n.wrapper},k.map((function(e){return a.a.createElement(x,{color:e,onClick:t})})))}var T=Object(r.createContext)({}),L=function(e){var t=e.children,n=Object(r.useState)("#4A90E2"),c=Object(i.a)(n,2),o={color:c[0],setColor:c[1]};return a.a.createElement(T.Provider,{value:o},t)};function A(){var e=Object(r.useContext)(T);if(!e)throw new Error("useCanvasState must be used within a CanvasContext");return e}var N=Object(h.a)({root:{flexGrow:1}});function G(){var e=N(),t=Object(r.useState)(0),n=Object(i.a)(t,2),c=n[0],o=n[1],l=A(),u=l.color,s=l.setColor;return a.a.createElement(j.a,{className:e.root},a.a.createElement(O.a,{value:c,onChange:function(e,t){o(t)},indicatorColor:"primary",textColor:"primary",centered:!0},a.a.createElement(g.a,{label:"SMOOTH"}),a.a.createElement(g.a,{label:"SPRAY"}),a.a.createElement(g.a,{label:"ERASER"})),"Selected Color: ",u,a.a.createElement(y,{onChange:s}))}var H=n(35),K=Object(r.createContext)(null),R=function(e){var t=e.children,n=Object(r.useRef)(null),c=Object(r.useRef)(null);n.current||(n.current=new SockJS("http://sock.jonghyeon.com/ws-stomp"),n.current.onopen=function(){console.error("websocket onopen")},n.current.onclose=function(){console.error("websocket onclose")},n.current.onmessage=function(){console.error("websocket onmessage")},n.current.onerror=function(){console.error("websocket onerror")}),c.current||(c.current=Object(H.over)(n.current));var o={stompClient:c.current};return a.a.createElement(K.Provider,{value:o},t)},B=Object(h.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));var I=function(e){var t=e.id,n=e.width,c=void 0===n?185:n,o=e.height,l=void 0===o?198:o,u=B(),s=Object(r.useState)(""),p=Object(i.a)(s,2),v=p[0],d=p[1],b=Object(r.useRef)(null),h=Object(r.useState)(void 0),O=Object(i.a)(h,2),g=O[0],w=O[1],x=Object(r.useState)(!1),k=Object(i.a)(x,2),S=k[0],y=k[1],T=A().color,L=function(){var e=Object(r.useContext)(K);if(!e)throw new Error("useCanvasState must be used within a CanvasContext");return e}().stompClient,N=function(e){if(b.current){var t=b.current;return{x:e.pageX-t.offsetLeft,y:e.pageY-t.offsetTop}}},H=Object(r.useCallback)((function(e){var t=N(e);t&&(y(!0),w(t))}),[]),R=Object(r.useCallback)((function(e){if(e.preventDefault(),e.stopPropagation(),S){var t=N(e);g&&t&&(!function(e,t){if(b.current){var n=b.current.getContext("2d");n&&(n.strokeStyle=T,n.lineJoin="round",n.lineWidth=5,n.globalAlpha=.3,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.closePath(),n.stroke(),L.send("/publish/paint",{},JSON.stringify({commandType:"DRAW",gameToken:"TEST-GAME-TOKEN",color:"#000",startX:0,startY:0,endX:1,endY:1})))}}(g,t),w(t))}}),[S,g]),I=Object(r.useCallback)((function(){y(!1)}),[]);return Object(r.useEffect)((function(){(function(e){return fetch("".concat(E,"/api/image/tile/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status<200||t.status>=300)){e.next=2;break}throw Error();case 2:return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})(t).then((function(e){e.imageUrl&&d(e.imageUrl)}))}),[t,d]),Object(r.useEffect)((function(){if(b.current){var e=b.current;return e.addEventListener("mousedown",H),e.addEventListener("mousemove",R),e.addEventListener("mouseup",I),e.addEventListener("mouseleave",I),function(){e.removeEventListener("mousedown",H),e.removeEventListener("mousemove",R),e.removeEventListener("mouseup",I),e.removeEventListener("mouseleave",I)}}}),[H,R,I]),a.a.createElement("div",{className:u.root},a.a.createElement(C.a,{container:!0,spacing:10},a.a.createElement(C.a,{item:!0,xs:12},a.a.createElement(j.a,{className:u.paper},"Save Button")),a.a.createElement(C.a,{item:!0,xs:12},a.a.createElement(j.a,{className:u.paper},a.a.createElement("canvas",{ref:b,className:"canvas",width:c,height:l,style:{backgroundImage:"url(".concat(E,"/").concat(v,")")}}))),a.a.createElement(C.a,{item:!0,xs:12},a.a.createElement(G,null))))};var P=function(){return a.a.createElement(L,null,a.a.createElement(R,null,a.a.createElement(l.a,{basename:"/everybody777-frontend/canvas"},a.a.createElement(u.d,null,a.a.createElement(u.b,{exact:!0,path:"/paint/:id",render:function(e){var t=e.match;return a.a.createElement(I,{id:t.params.id})}}),a.a.createElement(u.b,{exact:!0,path:"/",component:b}),a.a.createElement(u.b,null,a.a.createElement(u.a,{to:"/"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.c00c0dc3.chunk.js.map